.tender-controls
  = tender_label(tender)
  = button_tag 'Edit', :class => 'btn form-unlocker', :id => "unlock-tender-form-#{tender.id}", :"data-url" => unlock_tender_path(tender.id)
  %div{ :id => "tender-#{tender.id}-message", :class => "alert-message tender-message" }
    %p{ :class => 'hidden'}
    - unless tender.errors.empty?
      - tender.errors.each do |e|
        %p= e.to_s
= link_to tender.url, tender.url
= twitter_bootstrap_form_for tender do |f|
  = f.inputs do
    - Tender::TENDER_FIELD_ORDER.each do |cat|
      - if cat[0] == 'dates'
        = f.inputs '', :class => 'hidden_legend date_inputs_container' do
          - cat[1].each do |attr|
            .inline-inputs
              = tender_field_helper f, attr[0], {:disabled => tender.locked?(@session_id) }
              = tender_field_helper f, attr[1], {:disabled => tender.locked?(@session_id), :label => ', time', :class => '' }
      -else
        = f.inputs "#{cat[0].capitalize unless cat[0] == 'general'}", :class => "#{cat[0] == 'general' ? 'hidden_legend' : 'form_legend'}" do
          - cat[1].each do |attr|
            = tender_field_helper f, attr, {:disabled => tender.locked?(@session_id) }
    - Tender.misc_fields.each do |attr|
      = tender_field_helper f, attr, { :disabled => tender.locked?(@session_id) }
  = f.actions do
    - if tender.locked?(@session_id)
      = f.submit 'Save', :disabled => "true"
      = button_tag  'Cancel', :type => 'reset', :"data-url" => lock_tender_path(tender), :class => 'btn cancel', :id => "tender-#{tender.id}-cancel-btn", :disabled => "true"
    - else
      = f.submit 'Save'
      = button_tag  'Cancel', :type => 'reset', :"data-url" => lock_tender_path(tender), :class => 'btn cancel', :id => "tender-#{tender.id}-cancel-btn"
      